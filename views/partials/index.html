<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Sales Trends</title>
  <style>
    .chart-container {
      width: 1500px;
      height: 500px;
      border: 1px solid white;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    .circle-chart {
      width: 400px;
      height: 400px;
    }

    canvas {
      image-rendering: auto; /* Adjust the image rendering */
    }
  </style>
</head>
<body>
  <img src="banner.jpg" alt="Banner Image" class="banner-img">

  <div class="chart-container">
    <div class="circle-chart">
      <canvas id="circleChart" width="400" height="400"></canvas>
    </div>
    <div class="line-chart">
      <canvas id="lineChart" width="1200" height="400"></canvas>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let lineChart;
    let circleChart;

    // Function to create the initial line chart
    function createLineChart() {
      const canvas = document.getElementById('lineChart');
      const ctx = canvas.getContext('2d');

      const electronicsCount = <%= categoryCounts.electronics || 0 %>; // Category count for electronics
      const furnitureCount = <%= categoryCounts.furniture || 0 %>; // Category count for furniture
      const medicineCount = <%= categoryCounts.medicine || 0 %>; // Category count for medicine
      // Add similar variables for other categories if needed

      const chartData = {
        labels: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        datasets: [
          {
            label: `Product Electronics`,
            data: [electronicsCount, electronicsCount, electronicsCount, electronicsCount, electronicsCount, electronicsCount, electronicsCount],
            borderColor: '#000',
            backgroundColor: '#00FF00', // Green
            tension: 0.4
          },
          {
            label: `Product Furniture`,
            data: [furnitureCount, furnitureCount, furnitureCount, furnitureCount, furnitureCount, furnitureCount, furnitureCount],
            borderColor: '#000',
            backgroundColor: '#FFFF00', // Yellow
            tension: 0.4
          },
          {
            label: `Product Medicine`,
            data: [medicineCount, medicineCount, medicineCount, medicineCount, medicineCount, medicineCount, medicineCount],
            borderColor: '#000',
            backgroundColor: '#FF0000', // Red
            tension: 0.4
          }
          // Add similar datasets for other categories if needed
        ]
      };

      const options = {
        scales: {
          x: {
            display: true,
            title: {
              display: true,
              text: 'Days'
            }
          },
          y: {
            display: true,
            title: {
              display: true,
              text: 'Sales'
            }
          }
        },
        onClick: function(event) {
          const activePoints = lineChart.getElementsAtEvent(event);
          if (activePoints.length > 0) {
            const clickedDatasetIndex = activePoints[0].datasetIndex;
            const clickedIndex = activePoints[0].index;
            const datasetLabel = lineChart.data.datasets[clickedDatasetIndex].label;
            const value = lineChart.data.datasets[clickedDatasetIndex].data[clickedIndex];
            alert(`Product: ${datasetLabel}\nCount: ${value}`);
          }
        }
      };

      lineChart = new Chart(ctx, {
        type: 'line',
        data: chartData,
        options: options
      });
    }

    // Function to create the circle chart
    function createCircleChart() {
      const canvas = document.getElementById('circleChart');
      const ctx = canvas.getContext('2d');
      
      const electronicsCount = <%= categoryCounts.electronics || 0 %>; // Category count for electronics
      const furnitureCount = <%= categoryCounts.furniture || 0 %>; // Category count for furniture
      const medicineCount = <%= categoryCounts.medicine || 0 %>; // Category count for medicine
      const fashionCount = <%= categoryCounts.fashion || 0 %>; // Category count for fashion
      const booksCount = <%= categoryCounts.books || 0 %>; // Category count for books
      const sportsCount = <%= categoryCounts.sports || 0 %>; // Category count for sports
      // Add similar variables for other categories if needed

      const chartData = {
        labels: ['Categories'],
        datasets: [
          {
            label: 'Sales',
            data: [electronicsCount, furnitureCount, medicineCount, fashionCount, booksCount, sportsCount], // Include counts for other categories here
            backgroundColor: ['#00FF00', '#FFFF00', '#FF0000'] // Green, Yellow, Red
          }
        ]
      };

      const options = {
        responsive: false,
        plugins: {
          legend: {
            position: 'right',
          }
        },
        onClick: function(event) {
          const clickedSegment = circleChart.getElementsAtEvent(event)[0];
          if (clickedSegment) {
            const segmentLabel = circleChart.data.labels[clickedSegment.index];
            const value = circleChart.data.datasets[0].data[clickedSegment.index];
            alert(`Product: ${segmentLabel}\nCount: ${value}`);
          }
        }
      };

      circleChart = new Chart(ctx, {
        type: 'doughnut',
        data: chartData,
        options: options
      });
    }

    // Call the function to create the initial charts
    createLineChart();
    createCircleChart();
  </script>
</body>
</html>
